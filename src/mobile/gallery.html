<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MusicXML Player - Gallery</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0a1f44">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="MusicPlayer">
    
    <!-- Mobile-specific CSS -->
    <link rel="stylesheet" href="styles/mobile.css">
    <link rel="stylesheet" href="styles/library.css">
</head>
<body>
    <div class="library-container">
        <!-- Header -->
        <header class="page-header">
            <h1>Gallery</h1>
        </header>

        <!-- Search Bar -->
        <div class="search-container">
            <div class="search-bar">
                <svg class="search-icon" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"/>
                </svg>
                <input type="text" placeholder="Search">
            </div>
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <button class="filter-tab instrument">
                Instrument
                <svg viewBox="0 0 24 24">
                    <path fill="currentColor" d="M7,10L12,15L17,10H7Z"/>
                </svg>
            </button>
            <button class="filter-tab active">All</button>
            <button class="filter-tab">Classic</button>
            <button class="filter-tab">Jazz</button>
            <button class="filter-tab">Pop</button>
        </div>

        <!-- Song List -->
        <div class="song-list">
            <!-- Songs will be dynamically inserted here by library.js -->
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="index.html" class="nav-item">
            <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"/>
            </svg>
            <span>Home</span>
        </a>
        <a href="midi-player.html" class="nav-item">
            <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M12,3V13.55C11.41,13.21 10.73,13 10,13C7.79,13 6,14.79 6,17S7.79,21 10,21 14,19.21 14,17V7H18V3H12Z"/>
            </svg>
            <span>MIDI Player</span>
        </a>
        <a href="#" class="nav-item" id="add-button" onclick="return openUploadModal()">
            <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
            </svg>
            <span>Add</span>
        </a>
        <a href="gallery.html" class="nav-item active">
            <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M22,16V4A2,2 0 0,0 20,2H8A2,2 0 0,0 6,4V16A2,2 0 0,0 8,18H20A2,2 0 0,0 22,16M11,15L18,10L11,5V15M4,6H2V20A2,2 0 0,0 4,22H18V20H4V6Z"/>
            </svg>
            <span>Gallery</span>
        </a>
        <a href="mylibrary.html" class="nav-item">
            <svg viewBox="0 0 24 24">
                <path fill="currentColor" d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.55,5 2.45,5.4 1,6.5V21.16C1,21.41 1.25,21.66 1.5,21.66C1.6,21.66 1.65,21.59 1.75,21.59C3.1,20.94 5.05,20.5 6.5,20.5C8.45,20.5 10.55,20.9 12,22C13.35,21.15 15.8,20.5 17.5,20.5C19.15,20.5 20.85,20.81 22.25,21.56C22.35,21.61 22.4,21.59 22.5,21.59C22.75,21.59 23,21.34 23,21.09V6.5C22.4,6.05 21.75,5.75 21,5.5V19C19.9,18.65 18.7,18.5 17.5,18.5C15.8,18.5 13.35,19.15 12,20V6.5C10.55,5.4 8.45,5 6.5,5Z"/>
            </svg>
            <span>Library</span>
        </a>
    </nav>

    <!-- Upload Modal -->
    <div id="upload-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <div class="handle"></div>
                <h2>Upload songs</h2>
            </div>
            
            <div class="upload-options">
                <div class="upload-option" id="take-photo">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="currentColor" d="M4,4H7L9,2H15L17,4H20A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4M12,7A5,5 0 0,0 7,12A5,5 0 0,0 12,17A5,5 0 0,0 17,12A5,5 0 0,0 12,7M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9Z" />
                        </svg>
                    </div>
                    <div class="upload-info">
                        <h3>Take a photo</h3>
                        <p>Allow access to your camera and start scanning your music sheets with Halbestunde app.</p>
                        <button class="subscribe-btn">Subscribe</button>
                    </div>
                </div>
                
                <div class="upload-option" id="upload-photo">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="currentColor" d="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z" />
                        </svg>
                    </div>
                    <div class="upload-info">
                        <h3>Upload photo</h3>
                        <p>Browse and upload photos from your device. (JPG / PNG / max. 4mb)</p>
                        <button class="subscribe-btn">Subscribe</button>
                    </div>
                </div>
                
                <div class="upload-option" id="upload-pdf">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="currentColor" d="M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H19M18.5,18.5V19H19V18.5H18.5M9.5,14.25V19H5V14.25H9.5M14.5,19V14.25H10V19H14.5M19,19V14.25H15V19H19M9.5,13.75V9H5V13.75H9.5M14.5,13.75V9H10V13.75H14.5M19,13.75V9H15V13.75H19M9.5,8.5V5H5V8.5H9.5M14.5,8.5V5H10V8.5H14.5M19,8.5V5H15V8.5H19Z" />
                        </svg>
                    </div>
                    <div class="upload-info">
                        <h3>Upload PDF</h3>
                        <p>Browse and upload files from your device. (PDF max. 4mb)</p>
                        <button class="subscribe-btn">Subscribe</button>
                    </div>
                </div>
                
                <div class="upload-option" id="upload-musicxml">
                    <div class="upload-icon">
                        <svg viewBox="0 0 24 24">
                            <path fill="currentColor" d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20M9,13V19H7V13H9M15,15V19H17V15H15M11,11V19H13V11H11Z" />
                        </svg>
                    </div>
                    <div class="upload-info">
                        <h3>Upload MusicXML</h3>
                        <p>Import MusicXML files directly for accurate musical notation. (.xml, .musicxml max. 4mb)</p>
                        <button class="subscribe-btn">Subscribe</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/library.js"></script>
    <script type="module" src="js/upload.js"></script>
    
    <!-- Direct Modal Control Script -->
    <script>
        // Direct modal control that doesn't depend on modules
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Direct modal script loaded');
            
            // Function to open modal
            window.openUploadModal = function() {
                console.log('Opening modal from inline script');
                const modal = document.getElementById('upload-modal');
                if (modal) {
                    modal.classList.add('active');
                    setTimeout(() => {
                        document.body.style.overflow = 'hidden';
                    }, 300);
                    return false;
                }
            };
            
            // Function to close modal
            window.closeUploadModal = function() {
                console.log('Closing modal from inline script');
                const modal = document.getElementById('upload-modal');
                if (modal) {
                    modal.classList.remove('active');
                    document.body.style.overflow = '';
                }
            };
            
            // Set up the add button with direct handler
            const addButton = document.getElementById('add-button');
            if (addButton) {
                addButton.setAttribute('onclick', 'return openUploadModal()');
            }
            
            // Set up the modal overlay with direct handler
            const modalOverlay = document.querySelector('.modal-overlay');
            if (modalOverlay) {
                modalOverlay.setAttribute('onclick', 'closeUploadModal()');
            }
        });
    </script>
</body>
</html> 